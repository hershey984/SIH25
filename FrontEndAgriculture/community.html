<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Community | ‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø</title>
<style>
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0fdf4; margin:0; padding:0; }
.container { max-width:900px; margin:40px auto; padding:20px; }
.header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
.header h2 { margin:0; font-size:26px; color:#166534; }
.new-post-btn { background:#22c55e; color:white; border:none; padding:10px 20px; border-radius:10px; cursor:pointer; transition:0.3s; }
.new-post-btn:hover { background:#16a34a; }
.search-bar { display:flex; margin-bottom:20px; gap:10px; }
.search-bar input, .search-bar select { padding:10px; border-radius:10px; border:1px solid #ccc; flex:1; }
.post { background:#ffffff; padding:20px; border-radius:15px; box-shadow:0 6px 15px rgba(0,0,0,0.1); margin-bottom:20px; transition:0.3s; }
.post:hover { box-shadow:0 8px 20px rgba(0,0,0,0.15); }
.post h3 { margin:0 0 10px 0; color:#065f46; }
.meta { font-size:13px; color:#4b5563; margin-bottom:10px; display:flex; align-items:center; gap:10px; }
.meta img { width:35px; height:35px; border-radius:50%; }
.tags { margin:10px 0; }
.tag { display:inline-block; background:#d1fae5; color:#065f46; padding:5px 12px; border-radius:15px; font-size:12px; margin-right:6px; }
.actions { margin-top:10px; display:flex; gap:20px; font-size:14px; color:#4b5563; cursor:pointer; }
.actions span:hover { color:#16a34a; }
.comment-section { margin-top:15px; display:flex; flex-direction:column; gap:8px; }
.comment-section input { width:80%; padding:8px; border-radius:8px; border:1px solid #ccc; }
.comment-section button { padding:8px 12px; border-radius:8px; border:none; background:#22c55e; color:white; cursor:pointer; transition:0.3s; }
.comment-section button:hover { background:#16a34a; }
.comment-list p { background:#f0fdf4; padding:6px 10px; border-radius:10px; margin:0; font-size:13px; display:flex; align-items:center; gap:8px; }
.comment-list img { width:25px; height:25px; border-radius:50%; }
.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5); justify-content:center; align-items:center; }
.modal-content { background:#ffffff; padding:20px; border-radius:15px; width:400px; max-width:90%; display:flex; flex-direction:column; gap:10px; }
.modal-content input, .modal-content textarea { width:100%; padding:10px; border-radius:10px; border:1px solid #ccc; }
.modal-content button { padding:10px 15px; border-radius:10px; border:none; cursor:pointer; transition:0.3s; }
.modal-content button:hover { background:#16a34a; color:white; }
@media(max-width:600px){
  .search-bar { flex-direction:column; }
  .comment-section input { width:100%; }
}
</style>
</head>
<body>
<div class="container">

  <div class="header">
    <h2>üë®‚Äçüåæ Community | ‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø</h2>
    <button class="new-post-btn" onclick="openPostModal()">+ New Post</button>
  </div>
  <p style="color:#065f46; font-size:14px;">Share knowledge and learn from fellow farmers <br> ‡§Ö‡§®‡•ç‡§Ø ‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ú‡•ç‡§û‡§æ‡§® ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç</p>

  <div class="search-bar">
    <input type="text" placeholder="Search posts... ‡§™‡•ã‡§∏‡•ç‡§ü ‡§ñ‡•ã‡§ú‡•á‡§Ç...">
    <select>
      <option>All Categories</option>
      <option>Pest Control</option>
      <option>Crop Management</option>
      <option>Weather</option>
      <option>Market</option>
    </select>
  </div>

  <!-- Login -->
  <div id="loginDiv">
    <h3 style="color:#065f46;">Login | ‡§≤‡•â‡§ó‡§ø‡§®</h3>
    <input type="text" id="loginName" placeholder="Enter your name / ‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§°‡§æ‡§≤‡•á‡§Ç">
    <button onclick="loginUser()">Login</button>
  </div>

  <!-- Feed -->
  <div id="feedContainer"></div>

</div>

<!-- New Post Modal -->
<div class="modal" id="postModal">
  <div class="modal-content">
    <h3 style="color:#065f46;">Create New Post</h3>
    <input type="text" id="postTitle" placeholder="Post Title | ‡§™‡•ã‡§∏‡•ç‡§ü ‡§ï‡§æ ‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï">
    <textarea id="postContent" placeholder="Write your post | ‡§Ö‡§™‡§®‡•Ä ‡§™‡•ã‡§∏‡•ç‡§ü ‡§≤‡§ø‡§ñ‡•á‡§Ç"></textarea>
    <input type="text" id="postTags" placeholder="Tags (comma separated) | ‡§ü‡•à‡§ó‡•ç‡§∏ ‡§≤‡§ø‡§ñ‡•á‡§Ç">
    <input type="text" id="postLocation" placeholder="Location | ‡§∏‡•ç‡§•‡§æ‡§®">
    <button onclick="addNewPost()">Post</button>
    <button onclick="closePostModal()">Cancel</button>
  </div>
</div>

<script>
let loggedInUser = "";
let defaultAvatar = "https://via.placeholder.com/35";

// Login
function loginUser() {
  let name = document.getElementById("loginName").value.trim();
  if(!name) return alert("Please enter your name!");
  loggedInUser = name;
  document.getElementById("loginDiv").style.display = "none";
  alert("Welcome, " + loggedInUser + "!");
}

// Open / Close Modal
function openPostModal() { 
  if(!loggedInUser) return alert("Please login first!");
  document.getElementById("postModal").style.display = "flex"; 
}
function closePostModal() { document.getElementById("postModal").style.display = "none"; }

// Add Post
function addNewPost() {
  let title = document.getElementById("postTitle").value.trim();
  let content = document.getElementById("postContent").value.trim();
  let tags = document.getElementById("postTags").value.trim();
  let location = document.getElementById("postLocation").value.trim();
  if(!title || !content) return alert("Title and content are required!");

  let postDiv = document.createElement("div");
  postDiv.classList.add("post");

  let h3 = document.createElement("h3");
  h3.innerText = title;
  postDiv.appendChild(h3);

  let meta = document.createElement("div");
  meta.classList.add("meta");
  let today = new Date();
  let dateStr = today.toLocaleDateString("hi-IN", {day:'2-digit', month:'long', year:'numeric'});
  meta.innerHTML = `<img src="${defaultAvatar}" alt="avatar"> by <strong>${loggedInUser}</strong> ‚Ä¢ ${dateStr} ‚Ä¢ ${location || "Unknown"}`;
  postDiv.appendChild(meta);

  let p = document.createElement("p");
  p.innerText = content;
  postDiv.appendChild(p);

  if(tags) {
    let tagsDiv = document.createElement("div");
    tagsDiv.classList.add("tags");
    tags.split(",").forEach(tag => {
      let span = document.createElement("span");
      span.classList.add("tag");
      span.innerText = tag.trim();
      tagsDiv.appendChild(span);
    });
    postDiv.appendChild(tagsDiv);
  }

  // Actions
  let actionsDiv = document.createElement("div");
  actionsDiv.classList.add("actions");
  let likeSpan = document.createElement("span");
  likeSpan.innerText = "üëç 0 Likes";
  likeSpan.style.cursor="pointer";
  likeSpan.onclick = () => {
    let current = parseInt(likeSpan.innerText.split(" ")[1]);
    likeSpan.innerText = `üëç ${current+1} Likes`;
  };
  actionsDiv.appendChild(likeSpan);
  let commentSpan = document.createElement("span");
  commentSpan.innerText = "üí¨ Comment";
  actionsDiv.appendChild(commentSpan);
  postDiv.appendChild(actionsDiv);

  // Comment Section
  let commentSection = document.createElement("div");
  commentSection.classList.add("comment-section");
  let commentInput = document.createElement("input");
  commentInput.placeholder="Write a comment...";
  let commentBtn = document.createElement("button");
  commentBtn.innerText="Post";
  let commentList = document.createElement("div");
  commentBtn.onclick = () => {
    if(commentInput.value.trim()!=="") {
      let comment = document.createElement("p");
      comment.innerHTML = `<img src="${defaultAvatar}" alt="avatar"><strong>${loggedInUser}:</strong> ${commentInput.value}`;
      commentList.appendChild(comment);
      commentInput.value="";
    }
  };
  commentSection.appendChild(commentInput);
  commentSection.appendChild(commentBtn);
  commentSection.appendChild(commentList);
  postDiv.appendChild(commentSection);

  document.getElementById("feedContainer").prepend(postDiv);

  closePostModal();
  document.getElementById("postTitle").value="";
  document.getElementById("postContent").value="";
  document.getElementById("postTags").value="";
  document.getElementById("postLocation").value="";
}
</script>
</body>
</html>
